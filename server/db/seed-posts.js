import mysql from 'mysql2/promise';

// 创建数据库连接
const connection = await mysql.createConnection({
  host: 'localhost',
  user: 'root',
  password: '123456',
  database: 'gerenboke',
});

try {
  // 检查是否已有文章
  const [existingPosts] = await connection.query('SELECT COUNT(*) as count FROM posts');
  
  if (existingPosts[0].count === 0) {
    console.log('开始添加示例文章...');
    
    // 五篇指定的文章
    const posts = [
      {
        title: '我的编程学习之路',
        content: `这是我的编程学习之路的分享。从最初的Hello World开始，到现在能够独立开发完整的应用程序，我经历了许多挑战和成长。

在学习编程的过程中，我掌握了多种编程语言，包括JavaScript、Python、HTML和CSS。我还学习了前端框架如React和Vue，以及后端技术如Node.js和Express。

通过不断的实践和项目开发，我逐渐理解了编程的核心概念和最佳实践。我相信，只要坚持不懈，任何人都可以成为一名优秀的程序员。`,
        author_id: 1
      },
      {
        title: '最适合编程时听的音乐推荐',
        content: `编程时听音乐可以提高效率和专注力。以下是我推荐的几种类型的音乐：

1. 古典音乐：尤其是巴洛克时期的音乐，如巴赫、莫扎特的作品，节奏稳定，有助于集中注意力。
2. 电子音乐：轻松的电子音乐，如Chill Out、Ambient等，能够营造舒适的工作氛围。
3. 电影配乐：史诗般的电影配乐可以激发创造力，适合进行复杂的编程任务。
4. 自然声音：如雨声、海浪声等，能够帮助放松身心，减轻压力。

当然，每个人的喜好不同，最重要的是选择适合自己的音乐，能够让自己保持专注和高效。`,
        author_id: 1
      },
      {
        title: '如何高效学习新技术',
        content: `在快速发展的技术领域，高效学习新技术是非常重要的。以下是我的一些建议：

1. 明确学习目标：在开始学习之前，明确自己想要达到的目标，这样可以更有针对性地学习。
2. 系统学习基础：先掌握基础知识，再深入学习高级内容，这样可以建立坚实的知识体系。
3. 实践项目：通过实际项目来应用所学知识，这样可以加深理解和记忆。
4. 参与社区：加入相关的技术社区，与其他开发者交流，分享经验和问题。
5. 持续学习：技术不断发展，需要保持持续学习的态度，定期更新自己的知识。

通过这些方法，我能够快速有效地学习新技术，并将其应用到实际项目中。`,
        author_id: 1
      },
      {
        title: '技术人如何平衡学习与生活',
        content: `作为一名技术人员，平衡学习与生活是非常重要的。以下是我的一些经验和建议：

1. 制定合理的学习计划：合理安排学习时间，避免过度学习导致疲劳。
2. 设定学习边界：在工作时间专注于工作，在休息时间专注于生活，避免两者混淆。
3. 培养兴趣爱好：除了编程，培养其他兴趣爱好，如运动、阅读、旅游等，丰富生活。
4. 保持健康的生活方式：定期锻炼，保持良好的饮食习惯和充足的睡眠，这样才能有充沛的精力学习和工作。
5. 与家人朋友保持联系：不要因为学习和工作而忽略了家人和朋友，定期与他们交流和聚会。

平衡学习与生活需要不断调整和实践，找到适合自己的方式，才能保持长期的学习动力和生活质量。`,
        author_id: 1
      },
      {
        title: '学习编程改变我的5个思维方式',
        content: `学习编程不仅让我掌握了一门技能，还改变了我的思维方式。以下是编程对我思维方式的5个影响：

1. 逻辑思维：编程需要严谨的逻辑思维，这让我在解决问题时更加有条理和系统性。
2. 分解问题：将复杂问题分解为简单的子问题，逐个解决，这是编程中的常用方法，也适用于生活中的各种问题。
3. 调试思维：当程序出现错误时，需要逐步调试找到问题所在，这让我在面对问题时更加耐心和细心。
4. 抽象思维：编程中的抽象概念，如函数、类、模块等，让我能够从更高层次理解和解决问题。
5. 持续优化：编程需要不断优化代码，提高效率和性能，这让我在生活中也养成了追求卓越、不断改进的习惯。

学习编程不仅是掌握一门技能，更是培养一种思维方式，这种思维方式会影响我们的一生。`,
        author_id: 1
      }
    ];
    
    // 插入文章
    for (const post of posts) {
      await connection.query(
        'INSERT INTO posts (title, content, author_id) VALUES (?, ?, ?)',
        [post.title, post.content, post.author_id]
      );
      console.log(`添加文章: ${post.title}`);
    }
    
    console.log('示例文章添加完成！');
  } else {
    console.log('数据库中已有文章，跳过添加示例文章。');
  }
} catch (error) {
  console.error('添加示例文章失败:', error);
} finally {
  // 关闭连接
  await connection.end();
}
